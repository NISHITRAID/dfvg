<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CodeCompanion</title>
    <link rel="stylesheet" href="./main.css" />
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="dark:bg-gray-800 flex flex-col justify-center gap-y-5">
    <!-- nav is start from here   -->

    <nav
      class="bg-white border-gray-200 px-2 sm:px-4 py-2.5 rounded dark:bg-gray-900"
    >
      <div
        class="relative w-[1080px] container flex flex-wrap items-center justify-between mx-auto"
      >
        <a href="#" class="flex items-center">
          <img
            src="./image/logo.svg"
            class="h-6 mr-3 sm:h-9"
            alt="Flowbite Logo"
          />
          <span
            class="self-center text-xl font-semibold whitespace-nowrap dark:text-white"
            >CodeCompanion</span
          >
        </a>
        <button
          data-collapse-toggle="navbar-default"
          type="button"
          class="inline-flex items-center p-2 ml-3 text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600"
          aria-controls="navbar-default"
          aria-expanded="false"
        >
          <span class="sr-only">Open main menu</span>
          <svg
            class="w-6 h-6"
            aria-hidden="true"
            fill="currentColor"
            viewBox="0 0 20 20"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fill-rule="evenodd"
              d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"
              clip-rule="evenodd"
            ></path>
          </svg>
        </button>
        <div class="hidden w-full md:block md:w-auto" id="navbar-default">
          <ul
            class="flex flex-col p-4 mt-4 border border-gray-100 rounded-lg bg-gray-50 md:flex-row md:space-x-8 md:mt-0 md:text-sm md:font-medium md:border-0 md:bg-white dark:bg-gray-800 md:dark:bg-gray-900 dark:border-gray-700"
          >
            <li>
              <a
                href="./commit.html"
                class="block py-2 pl-3 pr-4 text-gray-700 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 dark:text-gray-400 md:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent"
                aria-current="page"
                >Comments Adder</a
              >
            </li>
            <li>
              <a
                href="./timecom.html"
                class="block py-2 pl-3 pr-4 text-gray-700 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 dark:text-gray-400 md:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent"
                >Time Complexity Finder</a
              >
            </li>
            <li>
              <a
                href="./codeexplain.html"
                class="block py-2 pl-3 pr-4 text-gray-700 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 dark:text-gray-400 md:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent"
                >Code expainer</a
              >
            </li>
            <li>
              <a
                href="./codechecker.html"
                class="block py-2 pl-3 pr-4 text-gray-700 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 dark:text-gray-400 md:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent"
                >Code Checker</a
              >
            </li>

            <li>
              <a
                href="index.html"
                class="block py-2 pl-3 pr-4 text-gray-700 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 dark:text-gray-400 md:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent"
                >Home</a
              >
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- Main secrtion is start from here -->
    <section class="gap-y-5">
      <div
        class="relative w-10/12 gap-y- 10 justify-between items-center mx-auto"
      >
        <!-- Text area in main sections -->

        <!------------------------------ Heading Area ------------------------->
        <div>
          <div class="text-center">
            <h1
              class="mb-4 text-4xl font-extrabold leading-none tracking-tight text-gray-900 md:text-5xl lg:text-6xl dark:text-white"
            >
              CodeCompanion
            </h1>
            <p
              class="mb-6 text-lg font-normal text-gray-500 lg:text-xl sm:px-16 xl:px-48 dark:text-gray-400"
            >
              CodeCompanion is a comprehensive and user-friendly web-based tool
              designed to support and enhance the development process for
              software engineers
            </p>
            <a
              href="https://github.com/TechNodes2-0/CodeCompanion"
              class="inline-flex items-center justify-center px-5 py-3 text-base font-medium text-center text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 dark:focus:ring-blue-900"
            >
              Learn more
              <svg
                class="w-5 h-5 ml-2 -mr-1"
                fill="currentColor"
                viewBox="0 0 20 20"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z"
                  clip-rule="evenodd"
                ></path>
              </svg>
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- information sections -->
    <section class="text-white">
      <main class="pt-8 pb-16 lg:pt-16 lg:pb-24 bg-white dark:bg-gray-900">
        <div class="flex justify-between px-4 mx-auto max-w-screen-xl">
          <article
            class="mx-auto w-full max-w-2xl format format-sm sm:format-base lg:format-lg format-blue dark:format-invert"
          >
            <header class="mb-4 lg:mb-6 not-format">
              <h1
                class="mb-4 text-3xl font-extrabold leading-tight text-gray-900 lg:mb-6 lg:text-4xl dark:text-white"
              >
                Code Companion Key feature
              </h1>

              <ul
                class="max-w-md space-y-5 text-gray-500 list-disc list-inside dark:text-gray-400"
              >
                <li class="text-1xl font-extrabold dark:text-white my-3">
                  Comments Adder
                  <p
                    class="font-mono text-[18px] leading-7 text-white opacity-70"
                  >
                    commit adder in code comapnion helps the user to add commits
                    in code written in any programming language which can be
                    understanded by any developers and helps to provide exact
                    working of the perticular section.
                  </p>
                </li>
                <li class="text-1xl font-extrabold dark:text-white my-3">
                  Time Complexcity Finder

                  <p
                    class="font-mono text-[18px] leading-7 text-white opacity-70"
                  >
                    The space and time complexity analyzer provides performance
                    insights and visual representations, helping developers
                    optimize their code. The code explainer offers clear
                    explanations of code snippets, making it easier to
                    understand code written by others.
                  </p>
                </li>
                <li class="text-1xl font-extrabold dark:text-white my-3">
                  Code Checker
                  <p
                    class="font-mono text-[18px] leading-7 text-white opacity-70"
                  >
                    The error finder and resolver helps find and fix errors,
                    saving time and effort on manual debugging. The tool
                    provides clear explanations of errors and suggestions for
                    resolution.
                  </p>
                </li>
                <li class="text-1xl font-extrabold dark:text-white my-3">
                  Code explainer
                  <p
                    class="font-mono text-[18px] leading-7 text-white opacity-70"
                  >
                    code explainer in code companion provides user the detailed
                    explaination of the code written in any programming language
                    and resolves any doubts related to perticular
                    code to the user.
                  </p>
                </li>
              </ul>
            </header>
          </article>
        </div>
      </main>
    </section>

    <!-- here is end -->

    <!-- Footer sections is start from here -->
    <section class="">
      <div class="">
        <footer class="p-4 bg-white shadow md:px-6 md:py-8 dark:bg-gray-900">
          <div class="sm:flex sm:items-center sm:justify-between">
            <a href="#" class="flex items-center mb-4 sm:mb-0">
              <img
                src="./image/logo.svg"
                class="h-8 mr-3"
                alt="Flowbite Logo"
              />
              <span
                class="self-center text-2xl font-semibold whitespace-nowrap dark:text-white"
                >CodeCompanion</span
              >
            </a>
            <ul
              class="flex flex-wrap items-center mb-6 text-sm text-gray-500 sm:mb-0 dark:text-gray-400"
            >
              <li>
                <a href="#" class="mr-4 hover:underline md:mr-6">About</a>
              </li>
              <li>
                <a href="#" class="mr-4 hover:underline md:mr-6"
                  >Privacy Policy</a
                >
              </li>
              <li>
                <a href="#" class="mr-4 hover:underline md:mr-6">Licensing</a>
              </li>
              <li>
                <a href="#" class="hover:underline">Contact</a>
              </li>
            </ul>
          </div>
          <hr
            class="my-6 border-gray-200 sm:mx-auto dark:border-gray-700 lg:my-8"
          />
          <span
            class="block text-sm text-gray-500 sm:text-center dark:text-gray-400"
            >© <a href="#" class="hover:underline">CodeCompanion™</a>. All
            Rights Reserved By TechNodes Team.
          </span>
        </footer>
      </div>
    </section>
    <script >
      // import bot from './assets/bot.svg'
// import user from './assets/user.svg'
const form=document.querySelector('form');
// var chatContainer=document.querySelector('#chat_container');
var chatContainer=document.getElementById('comment');
const op=document.getElementById('message');
let loadinterval;
var salt=" ";
// const canvas = document.getElementById('myCanvas');
//     const ctx = canvas.getContext('2d');
 
//     const image = new Image();
const commentbtn = document.getElementById('commiter');
if(commentbtn)
{
commentbtn.addEventListener('click', function (e) {
    salt = " Please rewrite the following code by adding meaningful comments to it";
    
    handleSubmit(e, salt);
  });
}
const timebtn = document.getElementById('time');
if(timebtn)
{
  time.addEventListener('click', function (e) {
    salt = "What is the time and space complexity of the given code?explain each with proper explanation";
    
    handleSubmit(e, salt);
  });
}
const explainbtn = document.getElementById('explain');
if(explainbtn)
{
  explainbtn.addEventListener('click', function (e) {
    salt = "Can you explain the following code and its behavior, including any important details or edge cases /n";
    
    handleSubmit(e, salt);
  });
}
const checkbtn = document.getElementById('check');
if(checkbtn)
{
  checkbtn.addEventListener('click', function (e) {
    salt ="Can you help me find and fix the error(s) in the following code? If possible, can you also explain why the error is occurring? and please rewrite code for me ";
    
    handleSubmit(e, salt);
  });
}

// const timeBtn = document.getElementById('button2');

// timeBtn.addEventListener('click', function (e) {
//   salt ="   add comments for this code";
  
//   handleSubmit(e, salt);
// });

function loader(element)
{
  element.textContent='';
  loadinterval=setInterval(()=>
  {
    element.textContent+='.';
    if(element.textContent==='....')
    {
      element.textContent='';
    }
  },300);
}







function typeText(element, text) {
  let index = 0

  let interval = setInterval(() => {
      if (index < text.length) {
          element.innerHTML += text.charAt(index)
          index++
      } else {
          clearInterval(interval)
      }
  }, 20)
}
function generateUniqueId() {
  const timestamp = Date.now();
  const randomNumber = Math.random();
  const hexadecimalString = randomNumber.toString(16);

  return `id-${timestamp}-${hexadecimalString}`;
}
function chatStripe(isAi, value, uniqueId) {
  return (
      `
      <div class="wrapper ${isAi && 'ai'}">
          <div class="chat">
              <div class="profile">

              </div>
              <div class="message" id=${uniqueId}>${value}</div>
          </div>
      </div>
  `
  )
}

// salt='Please rewrite the following code by adding meaningful comments to it';
const handleSubmit = async (e,salt) => {
  e.preventDefault()

  const data = new FormData(form)
  data.append('extra',salt);

  console.log(data);


  // user's chatstripe
 // chatContainer.innerHTML += chatStripe(false, data.get('prompt'))
  // chatContainer.innerHTML += "space complexity";

  // to clear the textarea input 
 // form.reset()

  // bot's chatstripe
  const uniqueId = generateUniqueId()
  //chatContainer.innerHTML += chatStripe(true, " ", uniqueId)

  // to focus scroll to the bottom 
  //chatContainer.scrollTop = chatContainer.scrollHeight;

  // specific message div 
  //const messageDiv = document.getElementById(uniqueId)

  op.innerHTML = " "
  // loader(op)

  const response = await fetch('https://code-companion.onrender.com', {
      method: 'POST',
      headers: {
          'Content-Type': 'application/json',
      },
      body: JSON.stringify({
          prompt: data.get('prompt'),
          extra: data.get('extra')
      })
  })

  clearInterval(loadinterval)
  //messageDiv.innerHTML = " "

  function drawer(data)
  {
    const imageUrl = data;
    image.src = imageUrl;
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    image.onload = function() {
      ctx.drawImage(image, 0, 0, canvas.width, canvas.height);
    };
  }
  
  if (response.ok) {
      const data = await response.json();
      const parsedData = data.bot.trim() // trims any trailing spaces/'\n' 
    console.log(parsedData);
     typeText(op, parsedData)
      // drawer(parsedData);
  } else {
      const err = await response.text()

     // messageDiv.innerHTML = "Something went wrong"
      alert(err)
  }
}

form.addEventListener('submit',  handleSubmit);
form.addEventListener('keyup', (e) => {
  if (e.keyCode === 13) {
    salt='Please rewrite the following code by adding meaningful comments to it';
       handleSubmit(e,salt)


      // handleSubmit(e,salt)
  }
})


    </script>
  </body>
</html>
